{% extends "layout.html" %}
{% block title %}Realtime Conversation{% endblock %}

{% block content %}
<h2>Realtime Conversation</h2>

<!-- 外部样式表 -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/realtime.css') }}">

<div class="mb-2">
  <button id="start" class="btn btn-primary" title="Initialize session (if needed) and start continuous capture">Start (Continuous)</button>
  <button id="forceStop" class="btn btn-secondary" disabled title="End ONLY the current turn early (if new audio present)">Force Stop (Turn)</button>
  <button id="disconnect" class="btn btn-danger" disabled title="Terminate the whole realtime session">Disconnect</button>
</div>

<div id="meters" style="font-size:13px;color:var(--color-text-soft);margin-bottom:6px;"></div>

<div id="assistantLine"></div>

<pre id="transcript"></pre>

<audio id="audioOut" class="mt-3" controls style="max-width:420px;display:block;margin-top:10px;"></audio>

<!-- 先加载 socket.io，再加载业务脚本 -->
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script defer src="{{ url_for('static', filename='js/realtime.js') }}"></script>
{% endblock %}
